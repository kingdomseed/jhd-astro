---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import PageHeader from '../components/PageHeader.astro';
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Support & Contact — Get Help Fast | Mythic GME Apps</title>
    <meta name="description" content="Quick answers, Discord, and contact options for Mythic GME Mobile and Digital." />
    <link rel="stylesheet" href="/global.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" />
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    <link rel="canonical" href="https://jasonholtdigital.com/support/" />
  </head>
  <body>
    <a class="skip" href="#main">Skip to main content</a>
    <div id="bg-atmo" aria-hidden="true"></div>
    <div id="site">
      <Header />
      
      <PageHeader 
        title="Support & Contact"
        subtitle="Get help or start a conversation" 
        description="Quick answers, community support, and direct contact options all in one place."
        accent="Support"
        layout="left"
        icon="fa-solid fa-life-ring"
        visualElement="particles"
        colorScheme="accent"
      />
      
      <main id="main" class="container" style="min-height:40vh; padding: 3rem 0;">
        
        <!-- Tabbed Interface -->
        <div class="support-tabs">
          <ul class="tab-nav" role="tablist">
            <li>
              <button class="tab-button active" role="tab" aria-selected="true" aria-controls="support-panel" id="support-tab">
                <i class="fa-solid fa-life-ring" aria-hidden="true"></i> Support & FAQ
              </button>
            </li>
            <li>
              <button class="tab-button" role="tab" aria-selected="false" aria-controls="contact-panel" id="contact-tab">
                <i class="fa-solid fa-envelope" aria-hidden="true"></i> Contact
              </button>
            </li>
          </ul>
        </div>

        <!-- Support Tab Content -->
        <div id="support-panel" class="tab-content active" role="tabpanel" aria-labelledby="support-tab">
          
          <section aria-labelledby="help-title">
            <h2 id="help-title">How to Get Help</h2>
            <div class="twoup">
              <div class="panel">
                <h3>Discord</h3>
                <p>Community tips, feature requests, quick answers.</p>
                <p>
                  <a class="cta-brick" href="https://discord.gg/PEDHrhzcnk" target="_blank" rel="noopener">
                    <i class="fa-brands fa-discord" aria-hidden="true"></i>
                    Join Discord
                  </a>
                </p>
              </div>
              <div class="panel">
                <h3>Email Support</h3>
                <p>For detailed issues, send an email to Support.</p>
                <p>
                  <a class="cta-brick" href="mailto:support@jasonholtdigital.com">
                    <i class="fa-solid fa-envelope" aria-hidden="true"></i>
                    Email Support
                  </a>
                </p>
              </div>
            </div>
          </section>

          <section id="faqs" aria-labelledby="faqs-title" style="margin-top:2rem">
            <h2 id="faqs-title">Top FAQs</h2>

            <h3>General</h3>
            <dl>
              <dt><strong>What is Mythic GME?</strong></dt>
              <dd>Mythic GME 2e is an oracle‑style system for GM‑less play by Word Mill Creative. The apps are the official companions for using the system at the table.</dd>
              <dt><strong>Do I need the book?</strong></dt>
              <dd>The book is recommended for full context and examples. The apps streamline play and include helpful references.</dd>
              <dt><strong>Which platforms are supported?</strong></dt>
              <dd>Mobile: iOS, Android, Amazon Fire. Desktop: Windows, macOS, Linux.</dd>
            </dl>

            <h3>Features</h3>
            <dl>
              <dt><strong>What can I do with the app?</strong></dt>
              <dd>Fate Chart/Check, Meaning tables, Scenes, Characters, Threads, Dice roller, Custom tables, Export/Import.</dd>
              <dt><strong>How do I create a custom dice formula?</strong></dt>
              <dd>Open Dice → "+" → Add formula using supported notation. See the <a href="/resources">Dice Roller Formula Guide</a>.</dd>
            </dl>

            <h3>Purchasing</h3>
            <dl>
              <dt><strong>Is there a subscription?</strong></dt>
              <dd>No. Check each store page for pricing and regional availability.</dd>
              <dt><strong>What's the difference between Mobile and Digital?</strong></dt>
              <dd>Mobile is optimized for phones/tablets. Digital is a desktop layout for longer sessions with everything included.</dd>
            </dl>

            <h3>Accessibility</h3>
            <dl>
              <dt><strong>What accessibility options exist?</strong></dt>
              <dd>Screen reader support, color‑blind modes, large font support. See each platform's settings.</dd>
            </dl>

            <h3>Reporting Issues</h3>
            <dl>
              <dt><strong>How do I report a bug?</strong></dt>
              <dd>Use in‑app feedback (Settings → Report an Issue), email Support, or post in Discord #bug‑reports.</dd>
            </dl>
          </section>

          <p style="margin-top:2rem; color: var(--color-text-muted)"><small>See latest known issues in <a href="/blog">Release Notes</a>.</small></p>
        </div>

        <!-- Contact Tab Content -->
        <div id="contact-panel" class="tab-content" role="tabpanel" aria-labelledby="contact-tab">
          
          <div class="twoup" style="gap: 2rem;">
            <!-- Left column: Contact info -->
            <div>
              <section class="panel" aria-labelledby="contact-info-title">
                <h2 id="contact-info-title">Get in Touch</h2>
                
                <div style="margin-top: 1.5rem;">
                  <h3>Email Contacts</h3>
                  <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 0.5rem;"><strong>Support:</strong> <a href="mailto:support@jasonholtdigital.com">support@jasonholtdigital.com</a></li>
                    <li><strong>General:</strong> <a href="mailto:jason@jasonholtdigital.com">jason@jasonholtdigital.com</a></li>
                  </ul>
                </div>

                <div style="margin-top: 1.5rem;">
                  <h3>Discord Community</h3>
                  <p>Tips, support, feature requests—say hi!</p>
                  <p>
                    <a class="cta-brick" href="https://discord.gg/PEDHrhzcnk" target="_blank" rel="noopener">
                      <i class="fa-brands fa-discord" aria-hidden="true"></i>
                      Join Discord
                    </a>
                  </p>
                </div>
              </section>

              <section class="panel" aria-labelledby="work-title" style="margin-top:1rem">
                <h2 id="work-title">Work with me</h2>
                <p>For app development projects, hire me on Upwork.</p>
                <p>
                  <a class="cta-brick" href="https://www.upwork.com/fl/~01e352937913645264?mp_source=share" target="_blank" rel="noopener">
                    <i class="fa-solid fa-briefcase" aria-hidden="true"></i>
                    Hire me on Upwork
                  </a>
                </p>
              </section>

              <section class="panel" aria-labelledby="location-title" style="margin-top:1rem">
                <h2 id="location-title">Location</h2>
                <p>Born in Texas, based in Frankfurt. Working with clients worldwide.</p>
                <p style="color: var(--color-text-muted); font-size: 0.9rem;"><small>Thanks for reaching out — I typically reply within 2 business days.</small></p>
              </section>
            </div>

            <!-- Right column: Contact form -->
            <div>
              <section class="panel" aria-labelledby="contact-form-title">
                <h2 id="contact-form-title">Send a Message</h2>
                <form id="contact-form" action="https://submit-form.com/BrXEDLTap" method="post" class="contact-form" style="margin-top: 1rem;">
                  
                  <div class="form-field">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" name="name" required maxlength="256" placeholder="Your full name">
                  </div>
                  
                  <div class="form-field">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required maxlength="256" placeholder="your@email.com">
                  </div>
                  
                  <div class="form-field">
                    <label for="phone">Phone (optional)</label>
                    <input type="tel" id="phone" name="phone" maxlength="256" placeholder="Your phone number">
                  </div>
                  
                  <div class="form-field">
                    <label for="message">Message</label>
                    <textarea id="message" name="message" required maxlength="5000" rows="6" placeholder="Tell me about your project or question..."></textarea>
                  </div>
                  
                  <!-- Cloudflare Turnstile -->
                  <div class="cf-turnstile" data-sitekey="0x4AAAAAABhU6Cccio-kREUw" data-callback="onTurnstileSuccess"></div>
                  
                  <div class="form-field">
                    <button type="submit" id="submit-btn" disabled class="btn btn--primary" style="width: 100%;">
                      <i class="fa-solid fa-paper-plane" aria-hidden="true"></i>
                      Send Message
                    </button>
                  </div>
                  
                  <!-- Form Messages -->
                  <div class="form-messages">
                    <div id="form-success" class="form-success">
                      <strong>Thank you!</strong> Your message has been sent successfully. I'll get back to you within 2 business days.
                    </div>
                    
                    <div id="form-error" class="form-error">
                      <strong>Oops!</strong> Something went wrong. Please try again or email me directly at jason@jasonholtdigital.com.
                    </div>
                  </div>
                </form>
              </section>
            </div>
          </div>
        </div>

      </main>
      <Footer />
    </div>
    
    <script>
      // Tab functionality
      function initTabs() {
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabButtons.forEach((button, index) => {
          button.addEventListener('click', () => {
            // Remove active class from all buttons and contents
            tabButtons.forEach(btn => {
              btn.classList.remove('active');
              btn.setAttribute('aria-selected', 'false');
            });
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Add active class to clicked button and corresponding content
            button.classList.add('active');
            button.setAttribute('aria-selected', 'true');
            tabContents[index].classList.add('active');
          });
        });
      }

      // Turnstile callback function
      function onTurnstileSuccess(token) {
        // Enable the submit button when Turnstile is completed
        document.getElementById('submit-btn').disabled = false;
        
        // Add the token to the form as a hidden input
        const form = document.getElementById('contact-form');
        let tokenInput = document.getElementById('cf-turnstile-response');
        if (!tokenInput) {
          tokenInput = document.createElement('input');
          tokenInput.type = 'hidden';
          tokenInput.name = 'cf-turnstile-response';
          tokenInput.id = 'cf-turnstile-response';
          form.appendChild(tokenInput);
        }
        tokenInput.value = token;
      }

      // Handle form submission
      function initContactForm() {
        const form = document.getElementById('contact-form');
        if (!form) return;
        
        form.addEventListener('submit', async function(e) {
          e.preventDefault();
          
          const submitBtn = document.getElementById('submit-btn');
          const turnstileToken = document.getElementById('cf-turnstile-response');
          const successDiv = document.getElementById('form-success');
          const errorDiv = document.getElementById('form-error');
          
          // Hide previous messages
          successDiv.style.display = 'none';
          errorDiv.style.display = 'none';
          
          if (!turnstileToken || !turnstileToken.value) {
            alert('Please complete the security verification.');
            return false;
          }
          
          // Show loading state
          const originalText = submitBtn.innerHTML;
          submitBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin" aria-hidden="true"></i> Sending...';
          submitBtn.disabled = true;
          
          try {
            const formData = new FormData(this);
            const response = await fetch(this.action, {
              method: 'POST',
              body: formData
            });
            
            if (response.ok) {
              // Success
              successDiv.style.display = 'block';
              this.reset();
              // Reset Turnstile
              if (window.turnstile) {
                window.turnstile.reset();
              }
            } else {
              // Error
              errorDiv.style.display = 'block';
            }
          } catch (error) {
            console.error('Form submission error:', error);
            errorDiv.style.display = 'block';
          } finally {
            // Reset button
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = true; // Disabled until Turnstile is completed again
          }
        });
      }

      // Initialize everything when DOM is loaded
      document.addEventListener('DOMContentLoaded', function() {
        initTabs();
        initContactForm();
      });
    </script>
  </body>
</html>