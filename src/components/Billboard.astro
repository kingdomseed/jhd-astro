---
// Billboard section shows a screenshot of the application. The image
// now rotates through multiple screenshots found in src/assets/billboard as
// billboard-1.jpeg .. billboard-7.jpeg, using the same styling as the
// original design. Minimal TypeScript provides accessible controls and
// auto-rotation that respects reduced motion.
import { Image } from "astro:assets";
import b1 from "../assets/billboard/billboard-1.jpeg";
import b2 from "../assets/billboard/billboard-2.jpeg";
import b3 from "../assets/billboard/billboard-3.jpeg";
import b4 from "../assets/billboard/billboard-4.jpeg";
import b5 from "../assets/billboard/billboard-5.jpeg";
import b6 from "../assets/billboard/billboard-6.jpeg";
import b7 from "../assets/billboard/billboard-7.jpeg";
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<section
  class="container section billboard"
  aria-label={t("billboard.aria_label")}
>
  <figure
    class="billboard-plate"
    aria-roledescription="carousel"
    aria-label={t("billboard.screenshots_label")}
  >
    <div class="bb-stage">
      <!-- Sizing image keeps height without visual output -->
      <Image
        class="billboard-img bb-sizer"
        src={b1}
        alt=""
        aria-hidden="true"
        loading="lazy"
        fetchpriority="low"
        decoding="async"
      />

      <!-- Slides (first active/eager; others eager to avoid pop-in during cross-fade) -->
      <Image
        class="billboard-img is-active"
        src={b1}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
      <Image
        class="billboard-img"
        src={b2}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
      <Image
        class="billboard-img"
        src={b3}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
      <Image
        class="billboard-img"
        src={b4}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
      <Image
        class="billboard-img"
        src={b5}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
      <Image
        class="billboard-img"
        src={b6}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
      <Image
        class="billboard-img"
        src={b7}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
    </div>
    <p id="bb-status" class="sr-only" aria-live="polite">Slide 1 of 7</p>
    <div class="bb-controls" aria-label={t("billboard.controls_label")}>
      <button type="button" class="bb-prev" aria-label={t("billboard.prev")}>
        <i class="fa-slab fa-regular fa-angle-left" aria-hidden="true"></i>
      </button>
      <button
        type="button"
        class="bb-pause"
        aria-pressed="false"
        aria-label={t("billboard.pause")}
      >
        <i class="fa-slab fa-regular fa-pause" aria-hidden="true"></i>
      </button>
      <button type="button" class="bb-next" aria-label={t("billboard.next")}>
        <i class="fa-slab fa-regular fa-angle-right" aria-hidden="true"></i>
      </button>
    </div>
  </figure>
  <script>
    import "../scripts/billboard.ts";
    // Hoisted import: processed by Astro/Vite (TS supported)
  </script>
</section>
