---
// Billboard section shows a screenshot of the application. The image
// now rotates through multiple language-specific screenshots found in
// src/assets/billboard/en/ and src/assets/billboard/pt/ as billboard-1.jpeg
// through billboard-7.jpeg. Minimal TypeScript provides accessible controls
// and auto-rotation that respects reduced motion.
import { Image } from "astro:assets";
// English images
import b1_en from "../assets/billboard/en/billboard-1.jpeg";
import b2_en from "../assets/billboard/en/billboard-2.jpeg";
import b3_en from "../assets/billboard/en/billboard-3.jpeg";
import b4_en from "../assets/billboard/en/billboard-4.jpeg";
import b5_en from "../assets/billboard/en/billboard-5.jpeg";
import b6_en from "../assets/billboard/en/billboard-6.jpeg";
import b7_en from "../assets/billboard/en/billboard-7.jpeg";
// Portuguese images
import b1_pt from "../assets/billboard/pt/billboard-1.jpeg";
import b2_pt from "../assets/billboard/pt/billboard-2.jpeg";
import b3_pt from "../assets/billboard/pt/billboard-3.jpeg";
import b4_pt from "../assets/billboard/pt/billboard-4.jpeg";
import b5_pt from "../assets/billboard/pt/billboard-5.jpeg";
import b6_pt from "../assets/billboard/pt/billboard-6.jpeg";
import b7_pt from "../assets/billboard/pt/billboard-7.jpeg";
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Select images based on language
const [b1, b2, b3, b4, b5, b6, b7] =
  lang === "pt"
    ? [b1_pt, b2_pt, b3_pt, b4_pt, b5_pt, b6_pt, b7_pt]
    : [b1_en, b2_en, b3_en, b4_en, b5_en, b6_en, b7_en];
---

<section
  class="container section billboard"
  aria-label={t("billboard.aria_label")}
>
  <figure
    class="billboard-plate"
    aria-roledescription="carousel"
    aria-label={t("billboard.screenshots_label")}
  >
    <div class="bb-stage">
      <!-- Sizing image keeps height without visual output -->
      <Image
        class="billboard-img bb-sizer"
        src={b1}
        alt=""
        aria-hidden="true"
        loading="lazy"
        fetchpriority="low"
        decoding="async"
      />

      <!-- Slides (first active/eager; others eager to avoid pop-in during cross-fade) -->
      <Image
        class="billboard-img is-active"
        src={b1}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
      <Image
        class="billboard-img"
        src={b2}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
      <Image
        class="billboard-img"
        src={b3}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
      <Image
        class="billboard-img"
        src={b4}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
      <Image
        class="billboard-img"
        src={b5}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
      <Image
        class="billboard-img"
        src={b6}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
      <Image
        class="billboard-img"
        src={b7}
        alt={t("billboard.alt_text")}
        loading="lazy"
        decoding="async"
      />
    </div>
    <p id="bb-status" class="sr-only" aria-live="polite">Slide 1 of 7</p>
    <div class="bb-controls" aria-label={t("billboard.controls_label")}>
      <button type="button" class="bb-prev" aria-label={t("billboard.prev")}>
        <i class="fa-slab fa-regular fa-angle-left" aria-hidden="true"></i>
      </button>
      <button
        type="button"
        class="bb-pause"
        aria-pressed="false"
        aria-label={t("billboard.pause")}
      >
        <i class="fa-slab fa-regular fa-pause" aria-hidden="true"></i>
      </button>
      <button type="button" class="bb-next" aria-label={t("billboard.next")}>
        <i class="fa-slab fa-regular fa-angle-right" aria-hidden="true"></i>
      </button>
    </div>
  </figure>
  <script>
    import "../scripts/billboard.ts";
    // Hoisted import: processed by Astro/Vite (TS supported)
  </script>
</section>
